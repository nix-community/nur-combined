From e7ebc5583a969c5517a3e11cd5b689f1b244e6b4 Mon Sep 17 00:00:00 2001
From: Colin <colin@uninsane.org>
Date: Mon, 8 Dec 2025 01:20:10 +0000
Subject: [PATCH] xdg-desktop-portal-cosmic: enable strictDeps, fix cross
 compilation

---
 pkgs/by-name/xd/xdg-desktop-portal-cosmic/package.nix | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/pkgs/by-name/xd/xdg-desktop-portal-cosmic/package.nix b/pkgs/by-name/xd/xdg-desktop-portal-cosmic/package.nix
index 7e9eab41efda60370e5c2617ee46d31ae4ef4fd4..fe2c17b8d469d0499c98873843a065ccf77bf183 100644
--- a/pkgs/by-name/xd/xdg-desktop-portal-cosmic/package.nix
+++ b/pkgs/by-name/xd/xdg-desktop-portal-cosmic/package.nix
@@ -3,6 +3,7 @@
   stdenv,
   rustPlatform,
   fetchFromGitHub,
+  glib,
   libcosmicAppHook,
   pkg-config,
   util-linux,
@@ -29,6 +30,7 @@ rustPlatform.buildRustPackage (finalAttrs: {
   cargoHash = "sha256-0PsiB/xvePSi5o1eRUgCq02UAGzuBQEe8+LlFJi5814=";
 
   separateDebugInfo = true;
+  strictDeps = true;
 
   nativeBuildInputs = [
     libcosmicAppHook
@@ -38,6 +40,7 @@ rustPlatform.buildRustPackage (finalAttrs: {
   ];
 
   buildInputs = [
+    glib
     libgbm
     pipewire
   ];
