import{aa as t,bo as _,aS as h,aP as u,aQ as z,du as y,R as A,i9 as f,ib as m,bL as j,ce as F,bp as M,dz as O,c0 as G,i8 as $}from"./index-DV5vAjQm.js";import{g as H,u as Q,a as W}from"./useSearch-BB_-T_X7.js";const ee=(e,r)=>r!=null&&r.length?[...e,...r]:e,re=(...e)=>{let r=!1,n=!1;return e.forEach(i=>{i.isLoading&&(r=!0),i.isError&&(n=!0)}),{isLoading:r,isError:n}},q=e=>"label"in e,k=e=>"object_id"in e,B=e=>{const r=e;return"name"in r&&"objectId"in r&&"kind"in r},D=e=>{const r="NO NAME";if(q(e))return{...e,name:e.label||e.objectId||r};if(k(e))return{...e,name:e.name||e.object_id||r,objectId:e.object_id,kind:e.primary_kind};if(B(e))return{...e,name:e.name||e.objectId||r};throw new Error("item type is unknown")},V=({style:e,...r})=>t.jsx("ul",{style:{...e,overflowX:"hidden",marginTop:0,overflowY:"auto"},...r}),X=({data:e,index:r,style:n})=>{const o=e[r],s=D(o);return t.jsxs("li",{className:h("bg-neutral-light-2 dark:bg-neutral-dark-2 flex items-center pl-2 border-y border-y-neutral-light-5",{"bg-neutral-light-3 dark:bg-neutral-dark-3":r%2!==0}),style:{...n},onClick:()=>{var l;return(l=s.onClick)==null?void 0:l.call(s,r)},"data-testid":"entity-row",children:[t.jsx(u,{nodeType:s.kind}),t.jsx(z,{tooltip:s.name,contentProps:{className:"max-w-80 dark:bg-neutral-dark-5 border-0"},children:t.jsx("div",{className:h("truncate ml-2",{"ml-10":k(o)}),children:s.name})})]})},te=({nodes:e,itemSize:r=32,heightScalar:n=16})=>t.jsx(_,{height:Math.min(e.length,n)*r,itemCount:e.length,itemData:e,itemSize:r,innerElementType:V,width:"100%",initialScrollOffset:0,style:{borderRadius:4},children:X}),Y=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),J=({text:e,search:r})=>{const n=Y(r),i=new RegExp(`(.*?)(${n})(.*)`,"mi"),o=e.match(i);if(o===null||o.length===1)return t.jsx(t.Fragment,{children:e});const s=o.slice(1);return t.jsx(y,{variant:"body2",component:"span",children:s.map((l,d)=>l.toLowerCase()===r.toLowerCase()?t.jsx(y,{variant:"body2",component:"span",style:{fontWeight:"bold"},children:l},d):t.jsx(A.Fragment,{children:l},d))})},U=({style:e,item:r,index:n,highlightedIndex:i,keyword:o,getItemProps:s})=>t.jsx(f,{button:!0,dense:!0,style:e,className:h("hover:bg-secondary hover:text-neutral-light-1 hover:dark:bg-secondary-variant-2 hover:dark:text-neutral-dark-1",{"bg-secondary text-neutral-light-1 dark:bg-secondary-variant-2 dark:text-neutral-dark-1":i===n}),"data-testid":"explore_search_result-list-item",...s({item:r,index:n}),children:t.jsx(m,{primary:t.jsxs(j,{style:{width:"100%",display:"flex",alignItems:"center"},children:[t.jsx(u,{nodeType:r.kind}),t.jsx(j,{style:{flexGrow:1,marginRight:"1em"},children:t.jsx(J,{text:r.label||r.objectId,search:o})})]}),primaryTypographyProps:{style:{whiteSpace:"nowrap",verticalAlign:"center"}}})},r.objectId),ne=({labelText:e,inputValue:r,selectedItem:n,handleNodeEdited:i,handleNodeSelected:o,disabled:s=!1,variant:l="outlined"})=>{const d=F(),{keyword:c,type:g}=H(r),{data:p,error:w,isError:T,isLoading:v,isFetching:E}=Q(c,g),{isOpen:N,getMenuProps:C,getInputProps:L,getComboboxProps:S,highlightedIndex:R,getItemProps:I,openMenu:P}=M({items:p||[],inputValue:r,selectedItem:n,onSelectedItemChange:({selectedItem:a})=>{a&&o(a)},itemToString:a=>(a==null?void 0:a.name)||(a==null?void 0:a.objectid)||""}),x=W(v,E,T,w,r,g,c,p);return t.jsxs("div",{...S(),style:{position:"relative"},children:[t.jsx(O,{placeholder:e,variant:l,size:"small",fullWidth:!0,disabled:s,inputProps:{"aria-label":e},InputProps:{style:{backgroundColor:s?d.palette.action.disabled:"inherit",fontSize:d.typography.pxToRem(14)},startAdornment:(n==null?void 0:n.type)&&t.jsx(u,{nodeType:n==null?void 0:n.type})},...L({onFocus:P,refKey:"inputRef",onChange:a=>{i(a.currentTarget.value)}}),"data-testid":"explore_search_input-search"}),t.jsx("div",{style:{position:"absolute",marginTop:"1rem",zIndex:1300},children:t.jsx(G,{style:{display:N?"inherit":"none"},children:t.jsx($,{...C(),dense:!0,style:{width:"100%"},"data-testid":"explore_search_result-list",children:x?t.jsx(f,{disabled:!0,dense:!0,children:t.jsx(m,{primary:x})}):p.map((a,b)=>t.jsx(U,{item:{label:a.name,objectId:a.objectid,kind:a.type},index:b,highlightedIndex:R,keyword:c,getItemProps:I},b))})})})]})};export{ne as E,J as H,U as S,te as V,ee as g,re as q};
