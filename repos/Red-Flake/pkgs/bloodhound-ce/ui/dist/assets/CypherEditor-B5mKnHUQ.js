import{iA as Ye,iB as Ze,iC as $e,iD as Jo,iE as _o,iF as et,iG as tt,iH as ot,iI as qo,iJ as Ee,iK as be,iL as zo,iM as ke,iN as Go,iO as c,iP as Pe,iQ as Ae,iR as a,iS as A,iT as Xo,iU as st,_ as E,iV as Yo,iW as ht,iX as ae,iY as oe,iZ as xe,i_ as lt,i$ as Le,j0 as Ne,j1 as Te,j2 as ft,j3 as pt,j4 as dt,j5 as De,j6 as ut,j7 as Ke,j8 as gt,j9 as Ct,ja as je,jb as Zo,jc as $o,jd as es,je as ts,jf as os,jg as ss,jh as ns,ji as is,jj as cs,jk as rs,jl as as,jm as hs,jn as ls,jo as fs,r as ps,jp as ds,aa as us}from"./index-DV5vAjQm.js";function nt(h,n){var t=Object.keys(h);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(h);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(h,l).enumerable})),t.push.apply(t,s)}return t}function Ve(h){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?nt(Object(t),!0).forEach(function(s){E(h,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(t)):nt(Object(t)).forEach(function(s){Object.defineProperty(h,s,Object.getOwnPropertyDescriptor(t,s))})}return h}const mt=h=>{const n=Ve({},a);for(let t of Object.keys(h))h[t]!==void 0&&(n[t]=h[t]);return n},it=h=>h&&typeof h=="object",gs=(h,n)=>{const t=it(h),s=it(n);if(t!==s)return!0;if(t){const l=Object.keys(h),u=Object.keys(n);return l.length!==u.length?!0:l.some(S=>h[S]!==n[S])}else return!1},Cs=(h={},{lintConf:n=new c,autocompleteConf:t=new c,bracketMatchingConf:s=new c,closeBracketsConf:l=new c,cursorWideConf:u=new c,cypherLanguageConf:S=new c,readableConf:T=new c,readOnlyConf:Y=new c,showLinesConf:Z=new c,lineWrappingConf:p=new c,historyConf:w=new c,placeholderConf:j=new c,searchConf:W=new c,tabKeyConf:r=new c,themeConf:D=new c,tooltipAbsoluteConf:H=new c,onLineNumberClick:R=()=>{},onFocusChanged:K=()=>{},onScrollChanged:J=()=>{},onKeyDown:V=()=>{},onKeyUp:_=()=>{}}={})=>{const d=mt(h),{autocomplete:x,autocompleteCloseOnBlur:C,bracketMatching:L,closeBrackets:O,cursorWide:M,cypherLanguage:N,history:P,tabKey:v,indentUnit:m,lineNumberFormatter:I,lineNumbers:g,lineWrapping:U,lint:B,placeholder:$,readOnly:b,readOnlyCursor:q,search:ee,searchTop:se,theme:F,tooltipAbsolute:he}=d;return[Yo({onFocusChanged:K,onScrollChanged:J,onKeyDown:V,onKeyUp:_}),S.of(ht({cypherLanguage:N})),n.of(ae({cypherLanguage:N,readOnly:b,lint:B})),t.of(oe({cypherLanguage:N,readOnly:b,autocomplete:x,autocompleteCloseOnBlur:C})),Z.of(xe({lineNumbers:g,lineNumberFormatter:I,onLineNumberClick:R})),p.of(lt({lineWrapping:U})),w.of(Le({history:P})),r.of(Ne({tabKey:v,indentUnit:m})),T.of(Te({readOnly:b,readOnlyCursor:q})),j.of(ft({placeholder:$})),D.of(pt({theme:F})),u.of(dt({cursorWide:M})),W.of(De({readOnly:b,search:ee,searchTop:se})),H.of(ut({tooltipAbsolute:he})),Y.of(Ke({readOnly:b,readOnlyCursor:q})),s.of(gt({bracketMatching:L})),l.of(Ct({closeBrackets:O}))]},ms=h=>h>0&&h<=1e3,ct=()=>window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,rt=h=>{const n=t=>{h(t.matches)};return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",n),n},at=h=>{window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",h)};function ys(h,n={}){const t=mt(n),{autofocus:s,position:l,selection:u,parseOnSetValue:S,value:T,preExtensions:Y,postExtensions:Z}=t;let{autocomplete:p,autocompleteOpen:w,autocompleteCloseOnBlur:j,autocompleteTriggerStrings:W,cypherLanguage:r,history:D,indentUnit:H,lineNumberFormatter:R,lineNumbers:K,lineWrapping:J,lint:V,placeholder:_,readOnly:d,readOnlyCursor:x,search:C,searchMatches:L,searchOpen:O,searchText:M,searchTop:N,schema:P,tabKey:v,theme:m,tooltipAbsolute:I}=t,g=null,U=null,B=null,$=!1,b=m==="auto"?ct():null,q=null,ee=!1;const se=e=>{b=e,Lo()};let F=m==="auto"?rt(se):null;const{on:he,off:yt,fire:St}=A(),{on:wt,off:Ot,fire:Et}=A(),{on:bt,off:kt,fire:Pt}=A(),{on:At,off:jt,fire:xt}=A(),{on:Lt,off:Nt,fire:Tt}=A(),{on:Dt,off:Kt,fire:Vt}=A(),{on:Mt,off:Ut,fire:Bt}=A(),{on:Ft,off:Wt,fire:Ht}=A(),{on:Rt,off:vt,fire:It}=A(),{on:Qt,off:Jt,fire:_t}=A(),le=(e,i)=>{Ht(e,i)},qt=e=>{q=!e.metaKey&&!e.ctrlKey&&!e.altKey&&e.key&&e.key.length===1?e.key:null,It(e)},zt=e=>{ee&&(z(),ee=!1),q=null,_t(e)},Gt=e=>{const{length:i=0,newLength:f=0}=e,y=f>i&&f-i<=2;if(q&&r&&p&&Array.isArray(W)&&y){let k=null;e.iterChanges((ce,re,G,ye,Q)=>{!k&&Q&&typeof Q=="object"&&Array.isArray(Q.text)&&Q.text.length==1&&(k=Q.text[0])}),k&&W.includes(k)&&(ee=!0)}},Xt=(e,i)=>{Gt(i),St(e,i)},Yt=e=>{U=(e||{position:null}).position,xt(st(e))},Zt=e=>{B=e,Tt(e)},$t=(e,i,f)=>{w=e,Vt(w,i,f)},fe=(e,i,f)=>{$||(O=e,Bt(O,i,f))},eo=e=>{Et(e)},to=e=>{Pt(e)},oo=Ye.updateListener.of(e=>{const{docChanged:i,selectionSet:f}=e,y=f?i?null:Ze(e.startState):null,k=f?Ze(e.state):null,ce=i||y!==k,re=$e(e.startState),G=$e(e.state),ye=Jo(e,!0),Q=r&&p&&(re!==G||!_o(e)||ye),Xe=et(e.startState),X=et(e.state),Ro=tt(e.startState),Se=tt(e.state),vo=ot(e.startState),Io=ot(e.state),we=ms(L),Qo=C&&(Xe!==X||(we?vo!==Io:Ro!==Se));if(i&&Xt(qo(e.state),e.changes),ce&&Yt(Ee(e.state)),f&&Zt(be(e.state)),Q){const Oe=G?zo(e.state,!0):void 0;$t(G,Oe,ye)}if(Qo){if(Xe||X){const Oe=we&&X?ke(e.state,L):void 0;fe(X,Se,Oe)}}else i&&we&&X&&fe(X,Se,ke(e.state,L))}),Me=new c,ne=new c,te=new c,Ue=new c,Be=new c,pe=new c,de=new c,ue=new c,Fe=new c,ie=new c,We=new c,ge=new c,Ce=new c,He=new c,Re=new c,ve=new c,Ie=new c,Qe=new c,so=m==="auto"?Ve(Ve({},t),{},{theme:b?"dark":"light"}):t,no=Go.create({doc:T,extensions:[Me.of(Y),...Cs(so,{lintConf:ne,autocompleteConf:te,bracketMatchingConf:Ue,closeBracketsConf:Be,cursorWideConf:Re,cypherLanguageConf:ve,tabKeyConf:Ce,readableConf:pe,readOnlyConf:de,showLinesConf:ue,lineWrappingConf:Fe,historyConf:ie,placeholderConf:We,searchConf:ge,themeConf:He,tooltipAbsoluteConf:Ie,onLineNumberClick:le,onFocusChanged:eo,onScrollChanged:to,onKeyDown:qt,onKeyUp:zt}),oo,Qe.of(Z)]});let o=new Ye({parent:h,state:no});o.version=1,o.newContentVersion=function(){return this.version+=1,this.version},o.newContentVersion.bind(o),r&&(g=Pe(o.state),g.update(T));const Je=e=>Xo(o.state,as(e)),_e=(e,i=!0)=>{const f=Je(e);if(f){const{position:y}=f;y!==U&&(U=y,o.dispatch(o.state.update({scrollIntoView:i,selection:{anchor:y}})))}},qe=(e,i=!0)=>{const f=[je.fromJSON({from:0,to:2,anchor:0,head:2}),je.fromJSON({from:3,to:4,anchor:3,head:4}),je.fromJSON({from:6,to:8,anchor:6,head:8})];Zo.create(f,2),e&&e!==B&&(B=e,o.dispatch(o.state.update({scrollIntoView:i,selection:e})))},z=()=>{r&&p&&$o(o)},io=()=>{r&&p&&fs(o)},me=()=>{C&&es(o)},co=()=>{C&&ls(o)};l!==void 0?_e(l):u!==void 0&&qe(u),U=(Ee(o.state)||{position:null}).position,B=be(o.state)||null,r&&P!==void 0&&g.setSchema(P),r&&p&&w===!0&&z(),r&&C&&O===!0&&me(),s&&o.contentDOM.focus();const ro=(e=a.preExtensions)=>{o.dispatch({effects:Me.reconfigure(e)})},ao=(e=a.postExtensions)=>{o.dispatch({effects:Qe.reconfigure(e)})},ho=(e=a.value,i=S)=>{const f=o.state.update({changes:{from:0,to:ts(o.state),insert:e}});if(o.update([f]),r&&i!==!1){const y=o.newContentVersion(),k=Pe(o.state);k.update(e,y),Ae(o,k)}},lo=e=>{r&&p&&(o.dispatch({effects:cs(e)}),rs(o))},fo=(e=a.history)=>{D=e,o.dispatch({effects:ie.reconfigure(Le({history:D}))})},po=()=>{D&&(o.dispatch({effects:ie.reconfigure([])}),o.dispatch({effects:ie.reconfigure(Le({history:D}))}))},uo=(e=a.lineNumbers)=>{K=e,o.dispatch({effects:ue.reconfigure(xe({lineNumbers:K,lineNumberFormatter:R,onLineNumberClick:le}))})},go=(e=a.lineNumberFormatter)=>{R=e,K&&o.dispatch({effects:ue.reconfigure(xe({lineNumbers:K,lineNumberFormatter:R,onLineNumberClick:le}))})},Co=(e=a.readOnly)=>{d=e,o.dispatch({effects:[pe.reconfigure(Te({readOnly:d,readOnlyCursor:x})),de.reconfigure(Ke({readOnly:d,readOnlyCursor:x})),te.reconfigure(oe({cypherLanguage:r,readOnly:d,autocomplete:p,autocompleteCloseOnBlur:j})),ne.reconfigure(ae({cypherLanguage:r,readOnly:d,lint:V}))]})},mo=(e=a.readOnlyCursor)=>{x=e,o.dispatch({effects:[pe.reconfigure(Te({readOnly:d,readOnlyCursor:x})),de.reconfigure(Ke({readOnly:d,readOnlyCursor:x}))]})},yo=(e=a.placeholder)=>{_=e,o.dispatch({effects:[We.reconfigure(ft({placeholder:_}))]})},So=(e=a.lineWrapping)=>{J=e,o.dispatch({effects:[Fe.reconfigure(lt({lineWrapping:J}))]})},wo=(e=a.autocomplete)=>{const i=r&&e&&!(r&&p);p=e,o.dispatch({effects:te.reconfigure(oe({cypherLanguage:r,readOnly:d,autocomplete:p,autocompleteCloseOnBlur:j}))}),i&&w&&z()},Oo=(e=a.autocompleteCloseOnBlur)=>{j=e,o.dispatch({effects:te.reconfigure(oe({cypherLanguage:r,readOnly:d,autocomplete:p,autocompleteCloseOnBlur:j}))})},Eo=(e=a.autocompleteOpen)=>{w=e,w?z():io()},bo=(e=a.autocompleteTriggerStrings)=>{W=e},ko=(e=a.lint)=>{V=e,o.dispatch({effects:ne.reconfigure(ae({cypherLanguage:r,readOnly:d,lint:V}))})},Po=()=>st(Ee(o.state)),Ao=()=>be(o.state),jo=()=>o?hs(o.state):0,xo=(e=a.schema)=>{const i=gs(P,e);P=e,r&&(g.setSchema(P),i&&p&&w&&z())},ze=(e=a.theme)=>{const i=m;m=e,i==="auto"&&e!=="auto"&&(b=null,F&&at(F),F=null),i!=="auto"&&e==="auto"&&(b=ct(),F=rt(se));const f=m==="auto"?b?"dark":"light":m;o.dispatch({effects:He.reconfigure(pt({theme:f}))})},Lo=()=>{ze(m)},No=(e=a.cursorWide)=>{o.dispatch({effects:Re.reconfigure(dt({cursorWide:e}))})},To=(e=a.cypherLanguage)=>{const i=r!==e,f=e&&p&&!(r&&p);if(r=e,i&&!r&&(g=null),o.dispatch({effects:ve.reconfigure(ht({cypherLanguage:r}))}),o.dispatch({effects:te.reconfigure(oe({cypherLanguage:r,readOnly:d,autocomplete:p,autocompleteCloseOnBlur:j}))}),o.dispatch({effects:ne.reconfigure(ae({cypherLanguage:r,readOnly:d,lint:V}))}),i&&r){o.version=1;const y=o.newContentVersion();g=Pe(o.state),g.setSchema(P),g.update(T,y),Ae(o,g)}f&&w&&z(),r||o&&is(o)},Do=(e=a.tooltipAbsolute)=>{I=e,o.dispatch({effects:Ie.reconfigure(ut({tooltipAbsolute:I}))})},Ko=()=>{o&&o.focus()},Vo=()=>{o&&o.destroy(),F&&at(F)},Mo=(e=a.tabKey)=>{v=e,o.dispatch({effects:Ce.reconfigure(Ne({tabKey:v,indentUnit:H}))})},Uo=(e=a.indentUnit)=>{H=e,o.dispatch({effects:Ce.reconfigure(Ne({tabKey:v,indentUnit:H}))})},Bo=(e=a.search)=>{const i=e&&!C;C=e,i&&($=!0),o.dispatch({effects:ge.reconfigure(De({readOnly:d,search:C,searchTop:N}))}),i&&(Ge(M),O&&me(),$=!1,fe(O,M,O?ke(o.state,L):void 0))},Fo=(e=a.searchMatches)=>{L=e},Wo=(e=a.searchOpen)=>{O=e,O?me():co()},Ge=(e=a.searchText)=>{if(M=e,C){const i=os(o.state),{caseSensitive:f,literal:y,regexp:k,replace:ce,wholeWord:re}=i,G=new ss({search:M,caseSensitive:f,literal:y,regexp:k,replace:ce,wholeWord:re});o.dispatch({effects:ns.of(G)})}},Ho={clearHistory:po,destroy:Vo,focus:Ko,getLineCount:jo,getPosition:Po,getPositionForValue:Je,getSelection:Ao,selectAutocompleteOption:lo,setAutocomplete:wo,setAutocompleteCloseOnBlur:Oo,setAutocompleteOpen:Eo,setAutocompleteTriggerStrings:bo,setBracketMatching:(e=a.bracketMatching)=>{o.dispatch({effects:Ue.reconfigure(gt({bracketMatching:e}))})},setCloseBrackets:(e=a.closeBrackets)=>{o.dispatch({effects:Be.reconfigure(Ct({closeBrackets:e}))})},setCursorWide:No,setCypherLanguage:To,setHistory:fo,setIndentUnit:Uo,setLineNumberFormatter:go,setLineNumbers:uo,setLineWrapping:So,setLint:ko,setPlaceholder:yo,setPosition:_e,setReadOnly:Co,setReadOnlyCursor:mo,setSchema:xo,setSearch:Bo,setSearchMatches:Fo,setSearchOpen:Wo,setSearchText:Ge,setSearchTop:(e=a.searchTop)=>{N=e,o.dispatch({effects:ge.reconfigure(De({readOnly:d,search:C,searchTop:N}))})},setSelection:qe,setTabKey:Mo,setTheme:ze,setTooltipAbsolute:Do,setValue:ho,onAutocompleteChanged:Dt,offAutocompleteChanged:Kt,onFocusChanged:wt,offFocusChanged:Ot,onKeyDown:Rt,offKeyDown:vt,onKeyUp:Qt,offKeyUp:Jt,onLineNumberClick:Ft,offLineNumberClick:Wt,onPositionChanged:At,offPositionChanged:jt,onScrollChanged:bt,offScrollChanged:kt,onSearchChanged:Mt,offSearchChanged:Ut,onSelectionChanged:Lt,offSelectionChanged:Nt,onValueChanged:he,offValueChanged:yt,setPreExtensions:ro,setPostExtensions:ao,codemirror:o,editorSupport:g};if(r&&S!==!1){const e=o.newContentVersion();g.update(T,e),Ae(o,g)}return{editor:Ho}}class ks extends ps.Component{constructor(n){super(n),E(this,"setEditorRef",t=>{this.editorRef=t}),E(this,"valueChanged",(t,s)=>{this.lastValue=t;const{onValueChanged:l}=this.props;l&&l(t,s)}),E(this,"focusChanged",t=>{const{onFocusChanged:s}=this.props;this.setState({focused:t}),s&&s(t)}),E(this,"scrollChanged",t=>{const{onScrollChanged:s}=this.props;s&&s(t)}),E(this,"positionChanged",t=>{this.lastPosition=(t||{position:null}).position;const{onPositionChanged:s}=this.props;s&&s(t)}),E(this,"selectionChanged",t=>{this.lastSelection=t;const{onSelectionChanged:s}=this.props;s&&s(t)}),E(this,"autocompleteChanged",(t,s,l)=>{const{onAutocompleteChanged:u}=this.props;u&&u(t,s,l)}),E(this,"searchChanged",(t,s,l)=>{const{onSearchChanged:u}=this.props;u&&u(t,s,l)}),E(this,"lineNumberClick",(t,s)=>{const{onLineNumberClick:l}=this.props;l&&l(t,s)}),E(this,"keyDown",t=>{const{onKeyDown:s}=this.props;s&&s(t)}),E(this,"keyUp",t=>{const{onKeyUp:s}=this.props;s&&s(t)}),this.state={focused:!1},this.lastValue=null,this.lastPosition=null,this.lastSelection=null}componentDidMount(){const{autocomplete:n,autocompleteCloseOnBlur:t,autocompleteOpen:s,autocompleteTriggerStrings:l,autofocus:u,bracketMatching:S,closeBrackets:T,cursorWide:Y,cypherLanguage:Z,history:p,indentUnit:w,lineNumberFormatter:j,lineNumbers:W,lineWrapping:r,lint:D,placeholder:H,position:R,readOnly:K,readOnlyCursor:J,schema:V,search:_,searchMatches:d,searchOpen:x,searchText:C,searchTop:L,selection:O,tabKey:M,theme:N,tooltipAbsolute:P,parseOnSetValue:v,value:m,onEditorCreated:I,preExtensions:g,postExtensions:U}=this.props;this.value=m;const{editor:B}=ys(this.editorRef,{autocomplete:n,autocompleteCloseOnBlur:t,autocompleteOpen:s,autocompleteTriggerStrings:l,autofocus:u,bracketMatching:S,closeBrackets:T,cursorWide:Y,cypherLanguage:Z,history:p,indentUnit:w,lineNumberFormatter:j,lineNumbers:W,lineWrapping:r,lint:D,placeholder:H,position:R,readOnly:K,readOnlyCursor:J,schema:V,search:_,searchMatches:d,searchOpen:x,searchText:C,searchTop:L,selection:O,tabKey:M,theme:N,tooltipAbsolute:P,parseOnSetValue:v,value:m,preExtensions:g,postExtensions:U});this.cypherEditor=B,this.cypherEditor.onValueChanged(this.valueChanged),this.cypherEditor.onFocusChanged(this.focusChanged),this.cypherEditor.onScrollChanged(this.scrollChanged),this.cypherEditor.onPositionChanged(this.positionChanged),this.cypherEditor.onSelectionChanged(this.selectionChanged),this.cypherEditor.onAutocompleteChanged(this.autocompleteChanged),this.cypherEditor.onSearchChanged(this.searchChanged),this.cypherEditor.onLineNumberClick(this.lineNumberClick),this.cypherEditor.onKeyDown(this.keyDown),this.cypherEditor.onKeyUp(this.keyUp),I&&I(this.cypherEditor)}componentWillUnmount(){this.cypherEditor&&(this.cypherEditor.offValueChanged(this.valueChanged),this.cypherEditor.offFocusChanged(this.focusChanged),this.cypherEditor.offScrollChanged(this.scrollChanged),this.cypherEditor.offPositionChanged(this.positionChanged),this.cypherEditor.offSelectionChanged(this.selectionChanged),this.cypherEditor.offAutocompleteChanged(this.autocompleteChanged),this.cypherEditor.offSearchChanged(this.searchChanged),this.cypherEditor.offLineNumberClick(this.lineNumberClick),this.cypherEditor.offKeyDown(this.keyDown),this.cypherEditor.offKeyUp(this.keyUp),this.cypherEditor.destroy())}componentDidUpdate(n){n.value!==this.props.value&&(this.value=this.props.value);for(let t of ds)n[t]!==this.props[t]&&this.updateOption({[t]:this.props[t]})}updateOption(n){if(!this.cypherEditor)return;const t=Object.keys(n).pop();if(t==="value"){if(n[t]===this.lastValue)return;this.lastValue=n[t]}if(t==="position"){const{position:S}=this.cypherEditor.getPositionForValue(n[t])||{position:null};if(S===this.lastPosition)return;this.lastPosition=S}if(t==="selection"){if(n[t]===this.lastSelection)return;this.lastSelection=n[t]}const s="set"+t[0].toUpperCase()+t.slice(1);this.cypherEditor[s]&&this.cypherEditor[s](n[t]),(this.props.autofocusProps!==void 0?this.props.autofocusProps:a.autofocusProps).includes(t)&&this.cypherEditor.focus(),(this.props.clearHistoryProps!==void 0?this.props.clearHistoryProps:a.clearHistoryProps).includes(t)&&this.cypherEditor.clearHistory()}render(){const{className:n,focusedClassName:t,style:s}=this.props,{focused:l}=this.state,u=(n?n+" ":"")+(l&&t?t:"");return us.jsx("div",{className:u,style:s,ref:this.setEditorRef})}}export{ks as C};
