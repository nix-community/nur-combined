import{aa as e,bj as j,bk as g,af as b,a$ as N,ag as h,ao as y,b9 as m,ab as p,ac as L,al as v,am as P,b8 as S,bl as T,R as k,aS as C,bm as $,r as z,b4 as A,bn as E,bf as Z}from"./index-DV5vAjQm.js";import{g as _,S as D}from"./Details-NHLysRkF.js";import{Z as M,i as B}from"./utils-BJWXTltN.js";import{a as f}from"./numberFormatting-CcJZFsr8.js";import"./useDebouncedValue-DdsEUO8g.js";import"./EntityInfoDataTable-A7rM9L2l.js";import"./useSearch-BB_-T_X7.js";import"./Cypher-CuQNkP8l.js";import"./CypherEditor-B5mKnHUQ.js";import"./useAvailableEnvironments-Dp1ClacZ.js";import"./useConfiguration-CjBq8UAR.js";const G=t=>e.jsx(j,{name:"DownArrow",width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx(g,{d:"M0 0.5L5 5.5L10 0.5H0Z"})});/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const R={prefix:"far",iconName:"square-plus",icon:[448,512,[61846,"plus-square"],"f0fe","M64 80c-8.8 0-16 7.2-16 16l0 320c0 8.8 7.2 16 16 16l320 0c8.8 0 16-7.2 16-16l0-320c0-8.8-7.2-16-16-16L64 80zM0 96C0 60.7 28.7 32 64 32l320 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM200 344l0-64-64 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l64 0 0-64c0-13.3 10.7-24 24-24s24 10.7 24 24l0 64 64 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-64 0 0 64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"]},u=t=>e.jsx(j,{name:"large-right-arrow",viewBox:"0 0 7 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx(g,{d:"M6 30.2522L1 1V59L6 30.2522Z",strokeLinejoin:"round"})}),q=({title:t,type:a,selectorCount:r,memberCount:c,id:l,analysisEnabled:d})=>{const o=b(),{tagId:s}=N(),{tagType:i}=h();return e.jsxs(y,{className:"w-full flex px-6 py-4 rounded-xl","data-testid":`privilege-zones_summary_${t.toLowerCase().replace(/ /g,"_")}-list_item-${l}`,children:[e.jsxs("div",{className:"flex-1 flex items-center justify-center truncate min-w-0",children:[a===m&&l!==s&&e.jsx(M,{size:24,tooltip:!0,analysisEnabled:d}),e.jsx("span",{className:"text-2xl font-bold truncate min-w-0",children:t})]}),e.jsx(u,{width:32,height:64}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[e.jsx("p",{className:"text-lg font-semibold",children:"Selectors"}),e.jsx("p",{className:"text-2xl font-thin",children:f(r??0)})]}),e.jsx(u,{width:32,height:64}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[e.jsx("p",{className:"text-lg font-semibold",children:"Members"}),e.jsx("p",{className:"text-2xl font-thin",children:f(c??0)})]}),e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center border-l border-black dark:border-white text-sm",children:e.jsxs(p,{variant:"text",onClick:n=>{n.stopPropagation(),o(`/${v}/${i}/${l}/${P}`)},className:"flex items-center space-x-2 hover:underline",children:[e.jsx(L,{icon:R,size:"xl"}),e.jsx("p",{children:"View Details"})]})})]})},H=({onSelect:t,listQuery:a,selected:r,title:c})=>{var o;const{isLabelPage:l}=h(),d=l?[S,T]:[m];return e.jsx("div",{className:"flex flex-col w-full h-full space-y-4",children:e.jsx("div",{className:"flex flex-col flex-1 space-y-4",children:e.jsx("ul",{className:"overflow-y-auto h-full","data-testid":"privilege-zones_summary_tag-list",children:a.isLoading?B.map((s,i)=>s(c,i,"h-32")):a.isError?e.jsx("li",{className:"border-y border-neutral-light-3 dark:border-neutral-dark-3 relative h-10 pl-2",children:e.jsx("span",{className:"text-base",children:"There was an error fetching this data"})}):(o=a.data)==null?void 0:o.filter(s=>d.includes(s.type)).sort((s,i)=>{const n=s.position??1,x=i.position??1;return n-x}).map(s=>{var i,n;return e.jsxs(k.Fragment,{children:[e.jsx("li",{onClick:()=>{t(s.id)},className:C("relative mb-4 cursor-pointer",{"border rounded-xl border-primary dark:border-secondary-variant-2":r===s.id.toString()}),children:e.jsx(q,{title:s.name,type:s.type,id:s.id,selectorCount:(i=s.counts)==null?void 0:i.selectors,memberCount:(n=s.counts)==null?void 0:n.members,analysisEnabled:s.analysis_enabled})}),s.type===m?e.jsx("div",{className:"flex justify-center my-2 pl-6 last:hidden",children:e.jsx(G,{})},s.id):null]},s.id)})})})})},ee=(t,a,r)=>!!t||(a==null?void 0:a.isLoading)&&(r==null?void 0:r.isLoading)||(a==null?void 0:a.isError)&&(r==null?void 0:r.isError),se=()=>{const t=b(),{zoneId:a,labelId:r,selectorId:c,tagId:l,tagType:d,tagTypeDisplayPlural:o}=h(),s=$(),i=_(a,r,c),n=z.useContext(A);if(!n)throw new Error("Details must be used within a PrivilegeZonesContext.Provider");const{InfoHeader:x}=n;return e.jsx("div",{className:"h-full",children:e.jsxs("div",{className:"flex mt-6 gap-8",children:[e.jsxs("div",{className:"flex flex-col gap-4 basis-2/3",children:[e.jsx(x,{}),e.jsx(H,{title:o,listQuery:s,selected:l,onSelect:w=>t(`/${v}/${d}/${w}/${E}`)})]}),e.jsxs("div",{className:"flex flex-col gap-4 basis-1/3",children:[i?e.jsx(p,{asChild:!0,variant:"secondary",children:e.jsx(Z,{className:"w-[4.5rem]","data-testid":"privilege-zones_edit-button",to:i,children:"Edit"})}):e.jsx(p,{variant:"secondary",className:"w-[4.5rem]",disabled:!0,children:"Edit"}),e.jsx(D,{})]})]})})};export{se as default,ee as getEditButtonState};
