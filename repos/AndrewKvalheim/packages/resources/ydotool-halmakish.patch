--- a/Client/tool_type.c
+++ b/Client/tool_type.c
@@ -40 +40,2 @@
-#define FLAG_UPPERCASE		0x80000000
+#define FLAG_ALTGR		0x40000000
+#define FLAG_SHIFT		0x80000000
@@ -44,2 +45,4 @@
-	-1,-1,-1,-1,-1,-1,-1,-1,
-	-1,KEY_TAB,KEY_ENTER,-1,-1,-1,-1,-1,
+	-1,-1,-1,-1,-1,-1,-1,-1,-1,
+	KEY_TAB, // horizontal tab
+	KEY_ENTER, // line feed
+	-1,-1,-1,-1,-1,
@@ -52,2 +55,16 @@
-	KEY_SPACE,KEY_1|FLAG_UPPERCASE,KEY_APOSTROPHE|FLAG_UPPERCASE,KEY_3|FLAG_UPPERCASE,KEY_4|FLAG_UPPERCASE,KEY_5|FLAG_UPPERCASE,KEY_7|FLAG_UPPERCASE,KEY_APOSTROPHE,
-	KEY_9|FLAG_UPPERCASE,KEY_0|FLAG_UPPERCASE,KEY_8|FLAG_UPPERCASE,KEY_EQUAL|FLAG_UPPERCASE,KEY_COMMA,KEY_MINUS,KEY_DOT,KEY_SLASH,
+	KEY_SPACE, // space
+	KEY_R|FLAG_ALTGR, // !
+	KEY_LEFTBRACE|FLAG_ALTGR, // "
+	KEY_A|FLAG_ALTGR, // #
+	KEY_N|FLAG_ALTGR, // $
+	KEY_Y|FLAG_ALTGR, // %
+	KEY_Q|FLAG_ALTGR, // &
+	KEY_APOSTROPHE|FLAG_ALTGR, // '
+	KEY_RO, // (
+	KEY_RO|FLAG_SHIFT, // )
+	KEY_P|FLAG_ALTGR, // *
+	KEY_SLASH|FLAG_ALTGR, // +
+	KEY_COMMA, // ,
+	KEY_V|FLAG_SHIFT, // -
+	KEY_V, // .
+	KEY_H, // /
@@ -56,2 +73,16 @@
-	KEY_0,KEY_1,KEY_2,KEY_3,KEY_4,KEY_5,KEY_6,KEY_7,
-	KEY_8,KEY_9,KEY_SEMICOLON|FLAG_UPPERCASE,KEY_SEMICOLON,KEY_COMMA|FLAG_UPPERCASE,KEY_EQUAL,KEY_DOT|FLAG_UPPERCASE,KEY_SLASH|FLAG_UPPERCASE,
+	KEY_SEMICOLON|FLAG_ALTGR, // 0
+	KEY_SPACE|FLAG_ALTGR, // 1
+	KEY_COMMA|FLAG_ALTGR, // 2
+	KEY_DOT|FLAG_ALTGR, // 3
+	KEY_J|FLAG_ALTGR, // 4
+	KEY_K|FLAG_ALTGR, // 5
+	KEY_L|FLAG_ALTGR, // 6
+	KEY_U|FLAG_ALTGR, // 7
+	KEY_I|FLAG_ALTGR, // 8
+	KEY_O|FLAG_ALTGR, // 9
+	KEY_COMMA|FLAG_SHIFT, // :
+	KEY_R, // ;
+	KEY_X|FLAG_ALTGR, // <
+	KEY_F|FLAG_ALTGR, // =
+	KEY_C|FLAG_ALTGR, // >
+	KEY_Z|FLAG_ALTGR, // ?
@@ -60,2 +91,16 @@
-	KEY_2|FLAG_UPPERCASE,KEY_A|FLAG_UPPERCASE,KEY_B|FLAG_UPPERCASE,KEY_C|FLAG_UPPERCASE,KEY_D|FLAG_UPPERCASE,KEY_E|FLAG_UPPERCASE,KEY_F|FLAG_UPPERCASE,KEY_G|FLAG_UPPERCASE,
-	KEY_H|FLAG_UPPERCASE,KEY_I|FLAG_UPPERCASE,KEY_J|FLAG_UPPERCASE,KEY_K|FLAG_UPPERCASE,KEY_L|FLAG_UPPERCASE,KEY_M|FLAG_UPPERCASE,KEY_N|FLAG_UPPERCASE,KEY_O|FLAG_UPPERCASE,
+	KEY_G|FLAG_ALTGR, // @
+	KEY_J|FLAG_SHIFT, // A
+	KEY_T|FLAG_SHIFT, // B
+	KEY_C|FLAG_SHIFT, // C
+	KEY_O|FLAG_SHIFT, // D
+	KEY_K|FLAG_SHIFT, // E
+	KEY_Q|FLAG_SHIFT, // F
+	KEY_N|FLAG_SHIFT, // G
+	KEY_S|FLAG_SHIFT, // H
+	KEY_SEMICOLON|FLAG_SHIFT, // I
+	KEY_P|FLAG_SHIFT, // J
+	KEY_DOT|FLAG_SHIFT, // K
+	KEY_W|FLAG_SHIFT, // L
+	KEY_X|FLAG_SHIFT, // M
+	KEY_D|FLAG_SHIFT, // N
+	KEY_L|FLAG_SHIFT, // O
@@ -64,2 +109,16 @@
-	KEY_P|FLAG_UPPERCASE,KEY_Q|FLAG_UPPERCASE,KEY_R|FLAG_UPPERCASE,KEY_S|FLAG_UPPERCASE,KEY_T|FLAG_UPPERCASE,KEY_U|FLAG_UPPERCASE,KEY_V|FLAG_UPPERCASE,KEY_W|FLAG_UPPERCASE,
-	KEY_X|FLAG_UPPERCASE,KEY_Y|FLAG_UPPERCASE,KEY_Z|FLAG_UPPERCASE,KEY_LEFTBRACE,KEY_BACKSLASH,KEY_RIGHTBRACE,KEY_6|FLAG_UPPERCASE,KEY_MINUS|FLAG_UPPERCASE,
+	KEY_U|FLAG_SHIFT, // P
+	KEY_Y|FLAG_SHIFT, // Q
+	KEY_E|FLAG_SHIFT, // R
+	KEY_A|FLAG_SHIFT, // S
+	KEY_F|FLAG_SHIFT, // T
+	KEY_I|FLAG_SHIFT, // U
+	KEY_B|FLAG_SHIFT, // V
+	KEY_G|FLAG_SHIFT, // W
+	KEY_M|FLAG_SHIFT, // X
+	KEY_SLASH|FLAG_SHIFT, // Y
+	KEY_Z|FLAG_SHIFT, // Z
+	KEY_W|FLAG_ALTGR, // [
+	KEY_M|FLAG_ALTGR, // backslash
+	KEY_E|FLAG_ALTGR, // ]
+	KEY_T|FLAG_ALTGR, // ^
+	KEY_R|FLAG_SHIFT, // _
@@ -68,2 +127,16 @@
-	KEY_GRAVE,KEY_A,KEY_B,KEY_C,KEY_D,KEY_E,KEY_F,KEY_G,
-	KEY_H,KEY_I,KEY_J,KEY_K,KEY_L,KEY_M,KEY_N,KEY_O,
+	KEY_H|FLAG_ALTGR, // `
+	KEY_J, // a
+	KEY_T, // b
+	KEY_C, // c
+	KEY_O, // d
+	KEY_K, // e
+	KEY_Q, // f
+	KEY_N, // g
+	KEY_S, // h
+	KEY_SEMICOLON, // i
+	KEY_P, // j
+	KEY_DOT, // k
+	KEY_W, // l
+	KEY_X, // m
+	KEY_D, // n
+	KEY_L, // o
@@ -72,2 +145,16 @@
-	KEY_P,KEY_Q,KEY_R,KEY_S,KEY_T,KEY_U,KEY_V,KEY_W,
-	KEY_X,KEY_Y,KEY_Z,KEY_LEFTBRACE|FLAG_UPPERCASE,KEY_BACKSLASH|FLAG_UPPERCASE,KEY_RIGHTBRACE|FLAG_UPPERCASE,KEY_GRAVE|FLAG_UPPERCASE,-1
+	KEY_U, // p
+	KEY_Y, // q
+	KEY_E, // r
+	KEY_A, // s
+	KEY_F, // t
+	KEY_I, // u
+	KEY_B, // v
+	KEY_G, // w
+	KEY_M, // x
+	KEY_SLASH, // y
+	KEY_Z, // z
+	KEY_S|FLAG_ALTGR, // {
+	KEY_B|FLAG_ALTGR, // |
+	KEY_D|FLAG_ALTGR, // }
+	KEY_H|FLAG_SHIFT, // ~
+	-1
@@ -119 +206,4 @@
-	if (kdef & FLAG_UPPERCASE) {
+	if (kdef & FLAG_ALTGR) {
+		uinput_emit(EV_KEY, KEY_RIGHTALT, 1, 1);
+	}
+	if (kdef & FLAG_SHIFT) {
@@ -127 +217 @@
-	if (kdef & FLAG_UPPERCASE) {
+	if (kdef & FLAG_SHIFT) {
@@ -129,0 +220,3 @@
+	if (kdef & FLAG_ALTGR) {
+		uinput_emit(EV_KEY, KEY_RIGHTALT, 0, 1);
+	}
